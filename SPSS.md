# SPSS

## 变量名

### 起名规则

1.变量名不能多于8个字符；

2.首字符应以英文字母开头，后面可以跟除了"!、？、*"之外的字母或数字；下划线、圆点不能为变量名的最后一个字符；

3.变量名不区分大小写字母；允许汉字作为变量名，汉字总数不能超过4个；

4.变量名不能与SPSS内部特有的具有特定含义的保留字符相同，如：ALL、BY、AND、NOT、OR等；

5.SPSS默认的变量名以VAR三个字母开头，后面跟补足5位的数字。如：VAR00001；



## 数值型

### 标准数值型

默认最大显示宽度为8位，小数部分最大为2位，会按照四舍五入与科学计数法进行调整；但数据的显示并不影响真正数据的存储，也不影响数据的计算



### 逗号数值型

逗号数值型数据其整数部分从各位开始每3位以一个逗号分隔。默认最大显示宽度为8，小数位为2。逗号所占的位数包含在总显示宽度之内，当超过8位时，先会去掉逗号的显示，再按照标准数值型的显示调整方式调整数据的显示



### 圆点数值型

圆点数值型数据其整数部分从个位开始每3位以一个圆点分隔，以逗号作为整数和小数部分的分隔符。 它的默认最大显示宽度为8, 小数位为2 。当数据值的总宽度大于默认的8位时，SPSS会按照上述逗号数值型的显示调整规则自动调整数据的显示



### 科学记数法型



### 美元数值型

主要用来表示货币数据，在数据前附加美元符号$



##字符型

由一个字符串组成，显示宽度为8个字符位，不能进行算术运算，并且区分大小写



## 日期型

用于表示日期或时间，显示格式较多，有dd-mm-yyyy;mm/dd/yyyy



## 变量名标签

对变量名含义的说明，增强变量名的可视性和统计分析的可读性，总长度可为120字符



## 变量值标签

对变量取值含义的解释说明



## 变量列格式

用于改变变量列宽度或数据在编辑窗口中的对齐方式等



## 变量缺失值

当分析过程中，发现收集的数据可能失真、不合理，此时需将其对待为缺失值

SPSS中缺失值三种指定方法：

1.对一个字符型或数值型变量，缺失值可以是1至3个特定的值离散值

2.对一个数值型变量，缺失值可以在1个连续的 闭区间内

3.对一个数值型变量，缺失值可以在2个连续的开区间内，并可指定同一个离散值



## 变量度量方法

数据的度量方法可以大致分为定距度量和非定距度量两种，对应的数据就是定距数据和非定距数据

例如身高、血压等为定距数据；而高、中、低分别用1、2、3表示为非定距数据



## 共享文本格式文件数据

### 文本文件的格式类型

SPSS规定：默认的文本文件的扩展名应为.dat。同时对文本文件中的数据排列方式也进行了规定，即按数据的排列方式分为文本文件固定格式的文本文件和自由格式的文本文件。

固定格式文本文件：一个个案数据可以占若干行；每个个案数据的每个变量值的起始列和终止列必须是固定不变的；数据项之间可以有分隔符，也可以没有。分隔符一般是逗号、空格等

自由格式文本文件：一个个案数据可以占若干行；每个个案数据的每个变量值的起始列和终止列可以不固定；数据项之间必须有一个分隔符。分隔符可以是逗号、空格、Tab键以及其他的用户自定义分隔符



## 个案排序

当排序变量只有一个时的排序称为单值排序，即：按照排序变量取值的大小次序对个案数据重新整理后显示。当排序变量是多个的排序称为多重排序。多重排序的第一个排序变量称为主排序变量，其他排序变量依次称为第二排序变量、第三排序变量等



## 个案选取

### 选择符合条件的个案

当选取符合一定条件的个案要求用户给出一个SPSS条件表达式，程序会自动对数据编辑窗口的所有个案进行条件判断，对满足条件的数据，将自动选取出来，而判断条件为假的数据将被剔除出去



###随机选取个案

随机选取个案就是度数据编辑窗口中的所有个案进行随机筛选

#### 近似选取

需给出一个百分比数值，SPSS按照这个比例，随机抽取相应百分比数目的个案

#### 精确选取

需要用户给出两个参数：第一个参数是希望选取的个案数；第二个是指定在前几个个案中选取

#### 选取某一区域内的个案

抽取一定范围内的全部个案，需要给出这个范围的上、下界的个案号码

#### 使用过滤变量选取个案

要求用户指定一个已存在的个案选取标准，变量值为0或系统缺失值的个案将被自动剔除掉，而其余的个案将自动选中



## SPSS算术表达式

1.字符型常量应用单引号引起来

2.SPSS变量名是指那些已存在于数据编辑窗口中的现有的变量名

3.SPSS的算术运算符主要包括：加减乘除，乘方（**）

4.SPSS算术表达式中的常量和变量的类型应该是一致的，否则无法计算

5.在SPSS中，算术表达式的计算是针对于每个个案的

6.存放SPSS算术表达式结果的变量，变量类型应与计算结果的数据类型一致



## SPSS函数

算术函数、统计函数、分布函数、逻辑函数、字符串函数、日期时间函数、缺失值函数和其他函数

具体见《统计分析与SPSS的应用》——薛薇（P39）



## 数据分组

指定分组变量；定义分组变量的分组区间；指定一个存放分组结果的标志变量，标志每个个案所属组的组号

### 数据自动分组

### 数据手工分组



## 插入SPSS文本

当需要在分析结果中插入一些自己的评述观点时，可以在相应子树项处选定，从**插入**-**新建文本**中输入相应文字



## 格式对齐

为使分析结果和报表打印出来后有较好的视觉效果，可以使用对齐处理：选中相应的子树或子树项，在**格式**中选择需要的对齐方式



## 改变索引输出区的显示样式

### 改变索引树的显示字体

**查看**-**大纲字体**

### 改变索引树的显示大小

**查看**-**大纲大小**



## 添加表格组成部分

使表格进入编辑状态，通过**Insert**进行输入



## 隐藏显示表格中内容

将需要隐藏的内容选定，通过**查看**-**隐藏**将其隐藏

当需要查看所有项目时，点击**显示所有选项**



## 表格行列互换

需要先使表格进入编辑状态

1.通过**透视**-**行列互置**完成

2.通过**透视**-**转到层（列）**

3.通过**透视**-**透视托盘**，在通过鼠标移动相应的图标完成



## 修改表格单元的外观

可以进行更改显示字体、数据显示格式、数据对齐方式等属性

1.使被处理的表格进入编辑状态

2.选中欲修改外观的单元

3.**格式**-**修改单元属性**



## 修改表格的外观和样式

1.使被处理的表格处于编辑状态

2.**格式**-**表属性**

或

1.使被处理的表格处于编辑状态

2.**格式**-**表外观**



## 峰度

用来描述某变量所有取值分布形态陡缓程度的统计量（相对于正太分布而言）
$$
Kurtosis = \frac{1}{n-1}\sum_{i=1}^{n}(x_i-\overline{x})^4/SD^4-3
$$
当峰度为0时，表示数据分布于正太分布的陡缓程度相同；峰度大于0表示比正太分布高峰要更陡峭，为尖峰顶；峰度大于0表示比正太分布的高峰要平坦，为平峰顶



## 偏度

用来描述某变量所有取值分布形态的对称性的统计量
$$
Skewness = \frac{1}{n-1}\sum_{i=1}^n(x_i-\overline{x})^3/SD^3
$$
与正太分布相比，偏度为0表示其数据分布形态与正太分布偏度相同，左右对称；偏度大于0表示正偏差数值较大，为正偏或称为右偏，有一条长尾拖在右边；偏度小于0则相反；偏度的绝对值越大表示数据的分布形态的偏斜程度越大



## 多重响应

对于多选题，可以使用二分法，即将题目中的子题目分为多个单选题，此时需要告诉SPSS该题其实是多选题；设定方式为在**分析→多重响应→二分法**中进行

但当选项较多且规定可选项较少时，采用上述方法较为浪费空间，此时可将其值设定为值标签并将所有选项输入，最后再用多重响应的方法将输入的数据组合，但此时需要选定**类别**项



## 假设检验

1.根据推断检验的目标，对待推断的总体参数或分布作一个基本假设$H_0$

2.利用收集到的样本数据和基本假设计算某检验统计量，该统计量服从或近似服从某统计分布

3.根据该统计量的值得到对应的相伴概率值。某统计量的相伴概率值是指该检验统计量在某个特定的极端区域取值在$H_0$成立时的概率

4.做出片段。用户给出一个显著性水平$\alpha$。如果相伴概率值小于或等于用户给定的显著性水平，则拒绝$H_0$，否则，如果相伴概率值大于用户给定的显著性水平，则不能拒绝



### 两独立样本t检验

#### 前提要求

1.两样本应是相互独立的，即从一总体中抽取一批样本对从另一总体中抽取一批样本没有任何影响，两组样本的个案数目可以不同，个案顺序可以随意调整

2.样本来自的两个总体应服从正态分布



#### 基本实现思路

1.利用F检验判断两总体的方差是否相等

依然使用假设检验的方法，假设**$H_{0}：两总体方差无差异$**；首先，对来自两个不同总体的样本分别计算样本均值。计算每个样本与本组样本均值的差，并对差取绝对值。于是得到两组绝对值差值序列；再利用单因素方差分析方法，判断两组绝对差值序列之间是否存在显著差异，即判断平均离差是否存在显著差异，从而间接判断两组方差是否存在显著差异

2.根据前一步的判断结果决定t统计量和自由度的计算公式，进而对t检验的结论作出判断

根据前一步的判断结果决定t统计量和自由度的计算公式：

1）在两总体方差未知且相等的情况下，t统计量计算公式：
$$
t=\frac{\overline{\chi}_1-\overline{\chi}_2}{\sqrt{S_{p}^2/n_1+S_{p}^2/n_2}}
$$
式中：
$$
S_{p}^2=\frac{(n_1-1)S_1^2+(n_2-1)S_2^2}{n_1+n_2-1}
$$
这里，t统计量服从$n_1+n_2-2$个自由度的t分布



2）在两总体方差未知且不相等的情况下，t统计量计算公式：


$$
t=\frac{\overline{\chi}_1-\overline{\chi}_2}{\sqrt{S_{p}^2/n_1+S_{p}^2/n_2}}
$$
这里，t统计量仍服从t分布，但自由度采用修正的自由度：
$$
f=\frac{(\frac{S_1^2}{n_1}+\frac{S_2^2}{n_2})^2}{\frac{(\frac{S_1^2}{n_1})^2}{n_1}+\frac{(\frac{S_2^2}{n_2})^2}{n_2}}
$$



### 两配对样本t检验

#### 前提要求

1.两样本应是配对的：观察值数目相同；两样本的观察值的顺序不能随意更改

2.样本来自的两个总体应服从正态分布



## 非假设检验

### 卡方检验

根据样本数据推断总体的分布于期望分布或某一理论分布是否有显著差异



### 二项分布检验

在样本数小于等于30时，按照计算二项分布概率的公式进行计算；在样本数大于30时，计算的是Z统计量，认为在零假设下，Z统计量近似服从正态分布。Z统计量的计算公式为：
$$
Z = \frac{K\pm0.5-nP}{\sqrt{nP(1-P)}}
$$
式中：K是观察值取值为指出检验值的样本个数，P为检验概率，n为样本总数。当K小于$n/2$时，取加号，K大于$n/2$时，取减号



### 单样本K-S检验

利用样本数据推断总体是否服从某一理论分布，适用于探索连续型随机变量的分布形态



### 单样本变量值随机性检验

对某变量的变量值出现是否随机进行检验



## 单样本非参数检验方法的比较

在上面的四种单样本参数检验中，前三种方法均属于拟合性检验的范畴。因此，当检验样本来自的总体是否服从某种理论分布时，可以选用前三种方法中的一种。但在实际使用中，应注意这些检验方法对数据的要求。

1.卡方检验一般要求待检验样本有较大的样本容量，比较适合于一个因素的多项分类的数据分析

2.二项分布检验只能作二项分布检验

3.单样本K-S检验比较适合于连续型数据的分析，其检验功效是比较强的



## 两独立样本非参数检验

### 曼-惠特尼U检验

通过平均秩的研究来实现推断。先将两个数据$[X_1,X_2,\cdots,X_m]$和$[Y_1,Y_2,\cdots,Y_n]$混合并按升序排序，求出各个数据各自的秩$R_i$，再对两个数据的秩求平均，得到两个平均秩$W_X/m$和$W_Y/n$，若两个平均秩相差甚远，则可以怀疑假设不成立

且该方法还对每个$[X_1,X_2,\cdots,X_m]$每个秩优于$[Y_1,Y_2,\cdots,Y_n]$每个秩的个数，$U_1$以及$[Y_1,Y_2,\cdots,Y_n]$每个秩优于$[X_1,X_2,\cdots,X_m]$每个秩的个数$U_2$进行比较，若相距较大，则怀疑假设

SPSS将自动计算$Wilcoxon\ W$统计量和$Mann-Whiteny\ U$统计量，若m<n,则$Wilcoxon\ W=W_Y$;若m>n，则$Wilcoxon\ W=W_X$；若m=n，则$Wilcoxon\ W$为第一个观察值所属样本组的W值



$Mann-Whiteny\ U$统计量计算式为：
$$
U=W-\frac{1}{2}n(n+1)
$$
式中：W即为$Wilcoxon\ W$,n取值为W对应组的样本容量

此时近似服从正态分布的Z统计量计算式为：
$$
Z=\frac{U-\frac{1}{2}mn}{\sqrt{\frac{1}{12}mn(m+n+1)}}
$$
在样本个数小于30时，应以U统计量的相伴概率作为判断标准；在样本个数大于30时，属于大样本情况下，应以Z统计量的相伴概率作为判断标准



### 两独立样本的K-S检验

不仅能够检验单样本是否服从某一理论分布，还能够对两独立样本的总体分布情况进行比较

基本思想与前述方法一致，但此处处理的是观察值的秩，而非观察值本身。首先，将两组样本混合按升序排序，然后分别计算两组样本秩的累计频数和每个点上的累计频率；最后，将两个累计频率相减，得到差值序列数据

该方法适用于大样本情况下



### 两独立样本的游程检验

单样本的游程检验是用来检验变量值的出现是否随机，两独立变量的游程检验则用来检验样本来自的两独立总体的分布是否存在显著差异

先将两组样本混合并按升序排序，在数据排序的同时，两组样本的每个观察值对应的样本组标志值序列也随之重新排列；随后，对这个标志值序列按前面讨论的方法求游程



### 两独立样本的极端反应检验

将一个样本作为控制样本，另一个样本作为实验样本。以控制样本作为对照，检验实验样本是否存在极端反应。如果实验样本不存在极端反应，则认为两独立总体分布无显著差异

首先，将两组样本混合并按升序排序；然后，找出控制样本最低秩和最高秩之间包含的观察值个数，称为跨度。为控制极端值对分析结果的影响，也可以先去掉控制样本两个最极端的观察值后再求跨度，这个跨度称为截头跨度。当跨度或截头跨度很小，则应是两样本数据无法充分混合后的结果，可以认为实验样本存在极端反应



## 多独立样本非参数检验

### 多独立样本的中位数检验

通过对多组样本数据的分析推断多个独立总体的分布是否存在显著差异

基本思想：如果多组样本的中位数无显著差异，或者说，如果多组独立样本有共同的中位数，那么，这个中位数应处于每组样本数据的中间位置

首先，将多组样本数据混合并按升序排序，求出混合样本数据中的中位数，并假设它是一个共同的中位数，然后分别计算每组样本中大于或小于这个共同中位数的样本数



### 多独立样本的K-W检验

基本方法：将多组样本数混合按升序排序，并求出每个观察值的秩，然后，对多组样本的秩求平均数



###多独立总体的$Jonkheere-Terpstra$检验

基本思想方法与两独立样本的曼-惠特尼U检验比较类似，也是计算一组样本的观察值小于其他组样本的观察值个数



## 两配对样本非参数检验

是在总体分布不很了解的情况下，对样本来自的两个相关配对总体的分布进行推断

### $McNemar$变化显著性检验

将研究对象自身作为对照者，检验其“前后”的变化是否显著

**注意：**SPSS两配对样本$McNemar$变化显著性检验要求待校验的两组样本的观察值是二值数据，因此，分析具有一定的局限性



### 两配对样本的符号（Sign）检验

基本思想：利用正、负号个数的多少来进行检验

先分别将第二组样本的各个观察值减去第一组样本的各个观察值，如果差值为正，则记号为正，差值为负，记为符号；然后，计算正号的个数$S_+$和负号的个数$S_-$，两者之和为总观察值个数n



### 两配对样本的Wilcoxon符号平均秩检验

基本思想：先按照符号检验的方法，分别将第二组样本的各个观察值减去第一组样本的各个观察值，如果插值为正，则记为正号，插值为负，记为负号，并同时保存绝对差值数据；然后，将绝对差值数据按升序排序，并求出相应的秩；最后，分别计算正号秩总和$W^+$、负号秩总和$W^-$以及正号平均秩和负号平均秩



## 多配对样本参数检验

### 多配对样本的$Cochran\ Q$检验

其所处理的样本数据要求是二值的



### 多配对样本的$Friedman$检验

用秩实现对多个配对总体分布进行检验

其要求数据是定距的，使该方法有了较大的适用范围

基本方法：先以观察值（行）为单位，将各个样本数据按行升序排序求得各样本数据在各自行中的秩，然后，分别计算各样本的秩总和，平均秩



### 多配对样本的Kendall协同系数检验

主要用在分析评判者的评判标准是否一致公平，将每个评判对象的分数都看做是来自多个配对总体的样本



##方差分析

分析控制变量的不同水平是否对观察变量产生了显著影响

### 单因素方差分析

实质采用了统计推断的方法，目的是通过实验数据（样本数据）研究观察变量在一个控制变量中的若干个不同水平下，其各个总体在分布上是否存在显著差异

前提要求：不同水平下的各总体应服从方差相同的正态分布，因此方差分析问题就转换成研究不同水平下各总体均值有无显著差异的问题

#### 前提检验

由于方差分析的前提是各水平下的总体服从方差相等的正态分布。对正态分布的要去不是很严格，但是对方差相等的要求比较严格，所以，必须对方差分析的前提进行检验

方法采用$Homogeneity-of-variance$，具体检验方法与独立样本t检验中的方差相等检验方法完全相同

#### 单因素方差分析的多重比较检验

即对该因素量值大小对结果影响的分析



### 均值比较

基本思路：

1.用户应先指定一个或多个变量作为分组变量，并按分组变量的不同取值对个案数据进行分组。如果分组变量有多个，还应指定这些分组变量之间的层次关系。层次关系可以是同层次的或多层次的。同层次意味着将按照各分组变量的不同取值分别对个案作分组；多层次意味着将首先按第一分组变量分组，然后对各分组下个案再按第二分组变量的不同取值继续分组，这样逐层向下细分。如果从单因素方差分析的角度来看，这里第一分组变量就是控制变量，各个分组就是控制变量下的各个水平

2.指定一个变量作为汇总变量，并计算该汇总变量在各分组下的基本描述统计量。如果从单因素方差分析的角度看，这里汇总变量就是观察变量

3.对第一分组变量各分组下的汇总变量均值有无显著差异作统计检验。如果从单因素方差分析的角度看，就是对控制变量不同水平下观察变量的均值是否有显著差异进行判断



### 多因素方差分析和协方差分析

控制变量个数是两个或两个以上，研究目的是要分析多个控制变量的作用、多个控制变量交互作用、以及其他随机因素作用是否对观察变量的分布产生显著影响

#### 多因素方差分析的基本思路

由于多因素方差分析既要分析多个控制变量独立作用对观察变量的影响，又要分析多个控制变量交互作用对观察变量的影响和其他随机因素对观察变量的影响，因此，它将观察变量总的变差平方和分解成由多个控制变量单独作用引起的、由多个控制变量交互影响引起的、由其他随机因素引起的三个部分



#### 协方差分析的基本思路

协方差分析是将那些很难控制的因素作为协变量，在排除协变量影响的条件下，分析控制变量对观察变量的影响，从而更加准确地对控制因素进行评价



## 相关分析

### 绘制散点图

1.简单散点图：一般用来显示一对变量之间的散点图

2.重叠散点图：在同一坐标轴上显示多对变量的散点图

3.矩阵散点图：以方矩阵格子的样子，在多个坐标轴上显示多对变量的散点图

4.三维散点图：以立体图的形式展现多对变量的散点图



### 计算相关系数

一般用样本相关系数r来推断总体相关系数c。如果两个变量是正线性相关关系，则r>0；如果两个变量是负线性相关关系，则r<0；如果两个变量存在一定程度的正线性相关关系，则0<r<1；如果两个变量存在一定程度的负线性相关关系，则-1<r<0。如果两个变量存在完全的正线性相关关系，则r=1；如果两个变量存在完全负线性相关关系，则r=-1；如果两个变量不存在线性相关关系，则r=0；一般，如果r的绝对值大于0.8，则认为两变量之间具有较强的线性相关关系，如果小于0.3，则认为两变量之间具有较弱的线性相关关系

#### Pearson简单相关系数

用来度量定距变量间的线性关系



#### Spearman等级相关系数

用来度量顺序水准变量间的线性相关关系；利用非参数检验的分析方法：先得到两变量中的各数据的排序名次，或称为秩，分别记为$U_i$、$V_i$，然后计算$D_i^2统计量，计算公式为：
$$
\sum_{i=1}^nD_i^2=\sum_{i=1}^n(U_i-V_i)^2
$$
然后计算Spearman等级相关系数，计算公式为：
$$
R=1-\frac{6\sum D_i^2}{n(n^2-1)}
$$
当个案数n小于等于30时，则直接利用Spearman等级相关计量表，SPSS自动依据此表给出相应的相伴概率值。若个案数大于30，SPSS将计算Z统计量，计算公式为：
$$
Z=R\sqrt{n-1}
$$
Z统计量近似服从正态分布，将依据正态分布表给出相应的相伴概率值



#### Kendall tua-b等级相关系数

用来度量顺序水准变量之间的线性相关关系；采用非参数检验方法，利用变量值的秩数据，计算一致对数目（U）和非一致对数目（V）。根据计算公式得Kendall相关系数：
$$
T=1-\frac{4V}{n(n-1)}
$$
若个案数小于等于30时，直接利用Kendall等级相关计量表，给出相应的相伴概率值。若个案数大于30，将计算Z统计量，计算公式为：
$$
Z=\frac{3T\sqrt{n(n-1)}}{\sqrt{2(2n+5)}}
$$
Z统计量近似服从正态分布，将依据正态分布表给出相应的相伴概率值



### 偏相关分析

在控制了其他变量对待分析的两个变量影响的条件下，分析两变量的线性相关关系



### 线性回归分析

侧重考察变量之间的数量变化规律，并通过一定的数学表达式，即回归方程，来描述这种关系，进而确定一个或几个变量的变化对另一个变量的影响程度，为预测提供科学的数学依据

基本步骤：

1.确定回归方程中的自变量和因变量

2.从收集到的样本数据出发确定自变量和因变量之间的数学关系式，即建立回归方程

3.对回归方程进行各种统计检验

4.利用回归方程进行预测



#### 线性回归方程

1.一元线性回归方程：自变量只有1个，较为理想化

2.多元线性回归方程：自变量的个数有2个以上



### 线性回归方程的统计检验

当建立一个回归方程后，不能立即就用于对某个实际问题的预测。因为，这个模型的参数是样本数据估计拟合出来的经验方程，还需要对它作各种统计检验

#### 回归方程的拟合优度检验

检验样本数据点聚集在回归之间周围的密集程度，从而评价回归方程对样本数据的代表程度



#### 回归方程的显著性检验

检验因变量和所有自变量的线性关系是否显著，是否可以用线性模型来描述因变量和自变量之间的关系



#### 回归系数显著性检验

只能检验所有回归系数是否同时与零有显著性差异



#### 回归方程的残差分析

1.残差序列的正态性分析：可以绘制标准化残差序列的带正态曲线的直方图或累计频率图来分析。通过图形的观察，可以确定残差序列是否接近正态

2.残差序列的随机性分析：可以绘制残差序列和对应的预测值序列的散点图。如果残差序列是随机的，那么残差序列对应于预测值序列无关，残差序列点将随机地分布在过零点的一条直线上

3.残差序列的独立性分析：分析残差序列是否存在后期值与前期值相关的现象。一般利用D-W检验作残差序列的独立性分析，当D-W的值接近2就基本可以认定残差序列具有独立性

4.通过对残差序列分析实现样本奇异值的诊断：一般认为，若某样本点对应的标准化残差值超过了-3~+3的范围，就可以判定该样本数据为奇异值

5.通过对残差序列分析实现异方差诊断：线性回归模型要求残差序列服从等方差的正态分布，即，在自变量的不同取支点上，残差序列的分布形态不应随自变量或因变量的变化而变化，否则，就认为产生了异方差现象。可以通过绘制学生化残差序列和因变量预测值的散点图来诊断该现象，或者可以计算学生化残差序列与因变量的预测间的相关系数。若异方差确实存在，可以先对因变量实施方差稳定变换后再泥猴回归方程。一般，如果残差序列与预测值的平方根成正比例变化，可以对因变量作开方处理；如果残差序列与预测值成比例变化，可以对因变量取对数；如果残差序列与预测值的平方成笔记，可以对因变量求倒数。



### 多元线性回归分析中的自变量筛选问题

当自变量过少，不能很少解释因变量的变化；但当自变量过多时，会产生多重共线性（自变量之间存在线性相关关系的现象）。故需要对自变量引入回归方程采取一定的策略：

####多元线性回归分析中的自变量筛选方法

1.向前筛选法：即变量不断进入回归方程的过程。首先选择与因变量具有最高相关系数的自变量进入方程，并对它进行回归系数显著性检验。然后，在剩余的变量中寻找与因变量偏相关系数最高并通过检验的自变量进入回归方程，并对方程中所有的自变量进行显著性检验，直到没有再可以进入方程的变量为止

2.向后筛选法：即变量不断剔除回归方程的过程。首先将所有变量全部引入回归方程，然后，进行回归系数显著性检验，在一个或多个t检验值不显著的变量中，将t值最小的变量剔除，然后重新拟合回归方程，并进行各种检验。如果新方程中所有变量的回归系数的t值都是显著的，则变量筛选过程结束，否则直到无自变量可以剔除为止

3.逐步筛选法：是前两种方法的综合。在向前筛选法的基础上，结合向后筛选法，在每个自变量进入方程后，都判断是否存在应剔除出方程的自变量。



#### 自变量间多重共线性的测度

1.自变量的容忍度。多元回归分析中，可以用变量的容忍度来度量自变量间多重共线性。某自变量$x_i$的容忍度定义为：$1-R_i$，反映了从当前方程中剔除该自变量后，回归方程中其他自变量无法解释的因变量变差的份额，取值范围为0~1

2.用特征根刻画自变量的方差。基本思想：如果自变量间确实存在较强的相关关系，那么它们之间必然存在信息重叠，那么就从这些自变量中提取出即能反映自变量信息（方差）、且又相互独立的因素（成分）。该方法从自变量的相关系数矩阵出发，计算相关系数矩阵的特征根，得到相应的若干成分。有最大特征根值的成分能够解释说明的自变量的方差比较是最大的，其他特征根随其特征值的减小，对自变量方差的解释能力就依次减弱。如果特征根中，有一个特征根的值远远大于其他特征根的值，那么说明这些自变量中一定具有相当多的重叠信息



### 曲线估计

先提供多种可选择的函数模型，用户在不能明确究竟是哪种更接近样本数据时，可以同时选择几种模型；然后，SPSS自动完成模型的参数估计，并显示F值、对应的相伴概率、$R^2$等统计量；最后，用户应选择具有最大$R^2$模型作为自己的回归模型，并作一些预测



### 权重估计



## 聚类分析

### 层次聚类法

在聚类分析开始，每个样本自成一类；然后，按照某种方法度量所有样本之间的亲疏程度，并把其中最亲密或称最相似的样本首先聚成一类；接下来，度量剩余的样本和小类间的亲疏程度，并将当前最亲密的样本或小类再聚成一类；接下来，再度量剩余的样本和小类间亲疏程度，并将当前最亲密的样本或小类再聚成一类；如此反复，直到所有样本聚成一类为止

#### 样本数据间亲疏程度的度量

主要是用样本将的距离、或样本间相关系数来度量

1.连续变量的样本距离测度方法

1）欧氏距离

两样本（x，y）之间的距离是各样本每个变量值之差的平方和的平方根

2）欧氏距离平方

两样本（x，y）之间的距离是各样本每个变量值之差的平方和

3）Chebychev距离

两样本（x，y）之间的距离是各样本所有变量值之差绝对值的最大值

4）Block距离

两样本（x，y）之间的距离是各样本每个变量值之差的绝对值的总和

5）Minkowski距离

两样本（x，y）之间的距离是各样本每个变量值之差的绝对值的p次方的总和，再求p次方根

6）Customized距离

两样本（x，y）之间的距离是各样本每个变量值之差的绝对值的p次方的总和，再求q次方根



2.顺序或名义变量的样本亲疏测度方法

1）$Chi-square\ measrue$：计算$\Chi^2$统计量

2）$Phi-square\ measure$：计算$\phi^2$统计量



#### 样本数据与小类、小类与小类间亲疏程度的度量

1.最短距离法

以当前某个样本已经形成的小类中的各样本距离中的最小值作为当前样本与该小类之间的距离

2.最长距离法

以当前某个样本已经形成的小类中的各样本距离中的最大值作为当前样本与该小类之间的距离

3.组间平均链锁法

定义两个小类之间的距离为所有样本对间的平均距离

4.组内平均链锁法

与组间平均链锁法类似，但这里的平均距离是对所有样本对距离求均值，包括小类之间的样本对、小类内的样本对

5.重心法

将两小类间的距离定义成两小类重心间的距离。每一小类的重心是该类中所有样本在各个变量上的均值所代表的点

6.离差平方和法

在聚类过程中，使小类各样本的欧氏距离总平方和增加最小的两小类合并为一类



#### 层次聚类分析的几点说明

1.SPSS中的层次聚类分析有Q型聚类和R型聚类分析

Q型聚类就是对样本数据进行聚类，R型聚类是对变量进行聚类。Q型聚类是使具有共同特征的样本聚集在一起，下一步可以分别对不同类中的样本作分析；R型聚类是使具有共同特征的变量聚集在一起，下一步可以从不同类中分别挑选出具有代表性的变量作分析，从而减少分析变量的个数

2.应注意聚类分析所选择的变量能否反应所需聚类的特征

3.应注意聚类分析的变量数据是否存在数级上的差异

由于聚类分析是以距离来度量样本亲疏程度的。从各种距离的定义上看，变量不同的数量级别将对距离产生较大的影响



### 快速聚类分析

基本思路：

1.用户指定希望聚成几类：K

2.确定K个类的初始类中心点。有两种方法：一种是用户自行指定，根据K组数据作为初始类中心点；另一种是由SPSS自动指定

3.计算所有样本数据点到K个类中心点的欧氏距离，SPSS按照K个类中心点距离最短的原则，把所有样本分派到各中心点所在的类中，形成一个新的K类，完成一次迭代过程

4.重新计算K个类的类中心点。计算每类中各个变量的变量值均值，并以均值点作为新的类中心点

5.重复（3）、（4）两歩，直到完成迭代过程



## 因子分析

1.因子变量的数量远少于原有指标变量的数量，能减少计算工作量

2.因子变量并不是原有变量的简单取舍，而是对原始变量的重新组构，能反应原有众多指标的绝大部分信息，不会产生重要信息的丢失问题

3.因子变量之间没有线性关系，对因子变量的分析能够为研究工作提供较大的便利

4.具有命名解释性（能够根据原始变量的信息来命名）



基本步骤：

1.确认待分析的缘由若干变量是否适合因子分析

2.构造因子变量

3.利用旋转方法使因子变量更具有可解释性

4.计算因子变量得分



### 判断变量是否适合因子分析

1.巴特利特球度检验

2.反印象相关矩阵

3.KMO检验







------

## 如何选择SPSS分析方法

1.基本描述
分析--描述统计--频率or交叉表--计算相应的百分比

2.均值比较
分析--比较均值--计算出均值及标准差

3.回归分析--探讨自变量对因变量的影响程度
分析--回归--线性回归--适合连续性变量，如果结合逐步回归，可识别主要影响因素
分析--回归--二元Logistic回归--适合“是”与“否”类型的因变量

4.方差分析--探讨2组观察数据是否差异显著
分析--一般线性模型--单变量
分析--比较均值--单因素ANOVA

5.相关分析--探讨2组数据之间的相关程度
分析--相关--双变量（Pearson,Kendall,Spearman）,Pearson适合连续变量，后两者适合定序、定性变量

